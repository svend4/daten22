# PseudoRAG - Иерархическая Система Структурирования Знаний

## Описание

PseudoRAG - это прототип системы, которая превращает простые запросы в структурированные базы знаний, используя концепцию 16 информационных архетипов.

### Ключевые Возможности

- **16 Информационных Архетипов** - универсальная онтология для классификации любых сущностей
- **Автоматическое Расширение Запросов** - превращает один вопрос в сотни структурированных подвопросов
- **4-Уровневая Пирамида** - от простого вопроса к структурированной базе знаний
- **Экспорт** - JSON, Markdown форматы

## Архитектура

```
УРОВЕНЬ 1: Простой вопрос ("Города Европы")
    ↓ [Алгоритм расширения]
УРОВЕНЬ 2: 850 структурированных вопросов
    ↕ [PseudoRAG]
УРОВЕНЬ 3: 850 проверенных ответов
    ↑ [Фильтрация]
УРОВЕНЬ 4: Миллионы документов
```

## Установка

```bash
# Клонировать репозиторий
git clone <repo-url>
cd daten22/pseudorag

# Установить зависимости (если нужны)
pip install -r requirements.txt
```

## Использование

### Базовый Пример

```python
from pseudorag.core.query_expander import QueryExpander

# Создание расширителя запросов
expander = QueryExpander()

# Расширение запроса
tree = expander.expand_query("Города Европы", depth=1, min_relevance=0.4)

# Сохранение результатов
tree.to_json("questionnaire.json")
tree.to_markdown("questionnaire.md")

print(f"Сгенерировано вопросов: {len(tree.questions)}")
```

### Запуск Демонстрации

```bash
python main.py
```

Демонстрация покажет:
1. Систему 16 архетипов
2. Расширение нескольких запросов
3. Структуру сгенерированных вопросников

## 16 Информационных Архетипов

### Квадрант I: Материальное-Статичное (MS)
- **MSEO** - Кристалл (элементарные материалы)
- **MSEF** - Песок (сыпучие элементы)
- **MSCO** - Здание (архитектура)
- **MSCF** - Лес (природные системы)

### Квадрант II: Материальное-Динамичное (MD)
- **MDEO** - Механизм (простые механизмы)
- **MDEF** - Организм (живые существа)
- **MDCO** - Машина (сложные машины)
- **MDCF** - Город (динамические системы)

### Квадрант III: Абстрактное-Статичное (AS)
- **ASEO** - Аксиома (константы и факты)
- **ASEF** - Архетип (символы и паттерны)
- **ASCO** - Теория (систематизированное знание)
- **ASCF** - Культура (традиции и ценности)

### Квадрант IV: Абстрактное-Динамичное (AD)
- **ADEO** - Алгоритм (процедуры)
- **ADEF** - Интуиция (спонтанные идеи)
- **ADCO** - Программа (комплексные системы)
- **ADCF** - Общество (социальная динамика)

## Структура Проекта

```
pseudorag/
├── core/
│   ├── archetypes.py      # Определения 16 архетипов
│   ├── query_expander.py  # Расширение запросов
│   └── __init__.py
├── templates/             # Шаблоны вопросов
├── examples/              # Примеры результатов
├── tests/                 # Тесты
├── main.py                # Главный скрипт
└── README.md
```

## API

### Класс `QueryExpander`

```python
expander = QueryExpander()

# Расширение запроса
tree = expander.expand_query(
    query="Города Европы",
    depth=1,               # Глубина декомпозиции (1-3)
    min_relevance=0.4      # Минимальная релевантность архетипа
)
```

### Класс `QuestionTree`

```python
# Доступ к вопросам
questions = tree.questions  # List[Question]

# Метаданные
metadata = tree.metadata

# Экспорт
tree.to_json("output.json")
tree.to_markdown("output.md")
```

### Класс `Question`

```python
question.id                    # "MSCO.3"
question.text                  # "Какие здания..."
question.archetype_code        # "MSCO"
question.priority              # 1-5
question.expected_answer_type  # "list", "number", "text"
```

## Примеры

### Пример 1: Города Европы

```python
from pseudorag.core.query_expander import QueryExpander

expander = QueryExpander()
tree = expander.expand_query("Города Европы")

# Результат: ~70 вопросов по 12 архетипам
```

**Примеры сгенерированных вопросов:**
- MSCO: Какие архитектурные стили представлены в европейских городах?
- MDCO: Какие транспортные системы функционируют?
- ASEO: Какие ключевые статистические показатели?
- ASCF: Какая культурная жизнь характерна?

### Пример 2: Транспортные Системы

```python
tree = expander.expand_query("Транспортные системы")

# Результат: ~55 вопросов с фокусом на MDCO, MDEO, ADCO
```

## Тестирование

```bash
# Запуск всех тестов
python -m pytest tests/

# Запуск конкретного теста
python -m pytest tests/test_archetypes.py
```

## Roadmap

- [x] Система 16 архетипов
- [x] Базовое расширение запросов
- [x] Экспорт в JSON/Markdown
- [ ] Продвинутый NLP для парсинга запросов
- [ ] Рекурсивная декомпозиция (depth > 1)
- [ ] Интеграция с RAG системой (Уровень 4→3)
- [ ] Веб-интерфейс
- [ ] API сервер

## Документация

Полная документация в `docs/`:
- `50-information-archetypes.md` - Теория архетипов
- `51-interaction-matrix.md` - Матрица взаимодействий 16×16
- `52-expansion-algorithm.md` - Алгоритм расширения
- `53-data-structuring-algorithm.md` - Алгоритм структурирования
- `54-pyramid-architecture.md` - Архитектура системы

## Лицензия

MIT License

## Контакты

- GitHub: [daten22](https://github.com/...)
- Email: ...

---

*PseudoRAG - Превращаем вопросы в знания*
